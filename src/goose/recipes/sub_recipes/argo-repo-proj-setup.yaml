version: 1.0.0
title: Register ArgoCD repo and create project
description: Register a repo in ArgoCD, and create a projet for the OTel Demo.
instructions: |

  Your goal is to prepare ArgoCD to manage the deployment of the OpenTelemetry Demo app.

prompt: |

  ## Role

  You are a site reliability engineer. Your role is to:
  * Create Kubernetes clusters
  * Configure Kubernetes clusters. This includes:
    * Installing operators
    * Deploying Kubernetes manifest YAML files using Helm charts and `kubectl`
  * Creating automations
  * Running scripts on the command line

  ## Objectives

  To set up ArgoCD so that it can be used to manage the depoyment of the OpenTelemetry Demo.

  Steps:
  1. Register the project repository in ArgoCD:

    ```bash
    argocd repo add git@github.com:avillela/ai-sre-workflow-demo.git --ssh-private-key-path $SSH_PK_PATH --name ai-orchestration-playground
    ```

  2. Create the ArgoCD project to deploy the OTel Demo
    * Apply the file `src/argocd/projects/otel-demo-project.yaml` to the `argocd` namespace in Kubernetes, using `kubectl`


  3. Deploy cert-manager to Kubernetes, managed by ArgoCD
    * Apply the file `src/argocd/apps/cert-manager-helm-app.yaml` to the `argocd` namespace in Kubernetes, using `kubectl`
    * Sync the `cert-manager` ArgoCD app
    * Wait until the app state is synced

  4. Deploy the OpenTelemetry Operator to Kubernetes, managed by ArgoCD
    * Apply the file `src/argocd/apps/otel-operator-helm-app.yaml` to the `argocd` namespace in Kubernetes, using `kubectl`
    * Sync the `otel-operator` ArgoCD app
    * Wait until the app state is synced
  

  ## Source

  * Sync ArgoCD app: https://argo-cd.readthedocs.io/en/latest/user-guide/commands/argocd_app_sync/

  ## Output

  Upon completion, print the following as per the "Output Guidelines" in `.goosehints`:
  * Status of ArgoCD repo creation (success/failed)
  * Status of ArgoCD project creation (success/failed)
  * Status of `cert-manager` app deployment in ArgoCD (healthy/unhealthy, synced/not synced)
  * Status of `otel-operator` app deployment in ArgoCD (healthy/unhealthy, synct/not synced)

extensions:
- type: builtin
  name: developer
  display_name: Developer Tools
  description: null
  timeout: 300
  bundled: true
  available_tools: []


settings:
  goose_provider: github_copilot
  # goose_model: claude-sonnet-4.5
  temperature: 0.5
author:
  contact: avillela
