version: 1.0.0
title: ArgoCD port forward
description: Create an ArgoCD port forward
instructions: |
  
  ## Role
  
  Use role from `.goosehints`.

  ## Port-forward command

  ```bash
  nohup kubectl --context {{ context_name }} port-forward svc/argocd-server -n argocd {{ forward_port }}:443 > portforward.log 2>&1 &
  ```


prompt: |
  
  ## Objective
  
  * Create a kubernetes port forward, to enable access to the ArgoCD admin console.
  * The port-forward MUST run as a background process

  Steps:
  1. Check to see if there is a port-forward currently running on port {{ forward_port }}. If there is an existing port-forward, abort.
  2. Create the port-forward using the port-forward command provided in the instructions
  
  ## Output

  Format output per "Output Guidelines" from `.goosehints`. Include only:
  * Previous port-forward (did one alerady exist?): yes/no
  * New port-forward created?: yes/no
  * Port # being forwarded
  * Command used for port-forward (only if new one was created)

parameters:
  - key: forward_port
    input_type: string
    requirement: required
    default: "9080"
    description: "ArgoCD port forward"
  - key: context_name
    input_type: string
    requirement: required
    default: "otel"
    description: "k8s context name"

extensions:
- type: builtin
  name: developer
  display_name: Developer Tools
  description: null
  timeout: 300
  bundled: true
  available_tools: []

settings:
  goose_provider: github_copilot
  # goose_model: claude-sonnet-4.5
  temperature: 0.5
author:
  contact: avillela
