version: 1.0.0
title: ArgoCD port forward
description: Create an ArgoCD port forward
instructions: |
  
  * Establish a reliable port-forward connection between a local machine and a Kubernetes service
  * Use `kubectl port-forward`, running it with `nohup` to persist the process after logouts. 
  * Ensure outputs are redirected to a log file for monitoring, and run the command in the background using '&'. Logs can be reviewed as needed using standard shell utilities (e.g., `cat`). This process is useful for debugging, accessing services locally, or establishing a temporary connection to a cluster service. Custom ports and namespaces can be configured depending on the use case.

  ## Output guidelines

  * Summarize results in tabular format
  * The summary table should have 2 columns:
    * First column: Component
    * Second column: Details

prompt: |
  
  ## Role

  You are a site reliability engineer. Your role is to:
  * Create Kubernetes clusters
  * Configure Kubernetes clusters. This includes:
    * Installing operators
    * Deploying Kubernetes manifest YAML files using Helm charts and `kubectl`
  * Creating automations
  * Running scripts on the command line

  ## Objectives
  
  Create a kubernetes port forward that runs in the background.

  To do this, execute the following steps:
  
  1. Check to see if there is a port-forward currently running on port {{ forward_port }}. If there is an existing port-forward, abort.
  2. Run this command:
  
    ```bash
    nohup kubectl port-forward svc/argocd-server -n argocd {{ forward_port }}:443 > portforward.log 2>&1 &
    ```

  ## Output

  Upon completion, print of the following as per the "Output guidelines" in the instructions:
  * Status of port-forward (success/failed)
  * Name of port being forwarded
  * Command used for port-forward (if the port-forward was successful)

parameters:
  - key: forward_port
    input_type: string
    requirement: required
    default: "9080"
    description: "ArgoCD port forward"

extensions:
- type: builtin
  name: developer
  display_name: Developer Tools
  description: null
  timeout: 300
  bundled: true
  available_tools: []

author:
  contact: avillela
