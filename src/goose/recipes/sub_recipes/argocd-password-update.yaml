version: 1.0.0
title: Update ArgoCD initial password
description: Update the ArgoCD password from the initial admin password.
instructions: |

  Retrieve the initial password for argocd and updated to a new one via the `argocd` CLI, using the `--insecure` flag

prompt: |

  ## Role

  You are a site reliability engineer. Your role is to:
  * Create Kubernetes clusters
  * Configure Kubernetes clusters. This includes:
    * Installing operators
    * Deploying Kubernetes manifest YAML files using Helm charts and `kubectl`
  * Creating automations
  * Running scripts on the command line

  ## Objectives

  Update the initial argocd admin password from the value on initial installation.
  
  Steps:
  1. Get the value of the "password" field of the `argocd-initial-admin-secret` kubernetes secret in the `argocd` namespace.
  2. Use the `argocd` CLI with the `--insecure` flag to update the password, where:
    * `current-password` is the value retrieved from Step 1
    * `new-password` is the value of the environment variable `ARGOCD_PASSWORD`
    * `username` is `admin`
    * ArgoCD URL is the value of the environment variable `ARGOCD_BASE_URL`
  3. Confirm successful login with new password by running the `argocd login` command with the `--insecure` flag where:
    * `password` is the value of the environment variable `ARGOCD_PASSWORD`
    * `username` is `admin`
    * ArgoCD URL is the value of the environment variable `ARGOCD_BASE_URL`
  3. Summarize results.

  ## Source

  * How to change the ArgoCD password via the `argocd` CLI: https://argo-cd.readthedocs.io/en/stable/user-guide/commands/argocd_account_update-password/

  ## Output

  Upon completion, print the following as per the "Output Guidelines" in the instructions:
  * Password change status (success/failed)
  * Login status with new password (success/failed)


extensions:
- type: builtin
  name: developer
  display_name: Developer Tools
  description: null
  timeout: 300
  bundled: true
  available_tools: []

settings:
  goose_provider: github_copilot
  goose_model: claude-sonnet-4.5
  temperature: 0.5
author:
  contact: avillela
