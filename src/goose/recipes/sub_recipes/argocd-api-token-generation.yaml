version: 1.0.0
title: Generate ArgoCD API token
description: Generate an ArgoCD API token for the admin account
instructions: The instructions provided detail a process of generating an argocd API token for a user account. It involves logging into argocd via the cli first, then then generating the token. This token is stored in a designated `.env` file using a specified key, with proper validation of server states and environment readiness throughout the process.
prompt: |
  Run this to generate the argocd api token. Log into argocd. The argocd URL is the value of the environment variable ARGOCD_BASE_URL. The password will be the value of the ARGOCD_PASSWORD environment variable. The api token should be added to the end of {{ env_file }} using the key ARGOCD_API_TOKEN.

  Summarize results.

parameters:
  - key: env_file
    input_type: string
    requirement: required
    default: "src/goose/config/.env"
    description: "Env file path (including .env file)"

extensions:
- type: builtin
  name: developer
  display_name: Developer Tools
  description: null
  timeout: 300
  bundled: true
  available_tools: []

activities:
- Login via CLI
- Generate API token
- Store API token in a .env file
author:
  contact: avillela
